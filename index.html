<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€‹æ¡ˆç£å°å ±å‘Šèˆ‡æ¦‚å¿µåŒ–å„€è¡¨æ¿ - Wordè¼¸å‡ºç‰ˆ</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', 'Microsoft JhengHei', sans-serif;
            background-color: #f4f7f9;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.03);
            padding: 24px;
            margin-bottom: 24px;
        }
        .rating-label {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            margin-right: 8px;
            font-size: 0.875rem;
            user-select: none;
        }
        input[type="radio"]:checked + .rating-label,
        input[type="checkbox"]:checked + .rating-label {
            background-color: #3b82f6; /* Blue-500 */
            color: white;
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.5);
        }
        .section-title {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 8px;
            margin-bottom: 16px;
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
        }
        .subsection-title {
            font-weight: 600;
            color: #1e40af; /* Blue-700 */
            margin-top: 12px;
            margin-bottom: 8px;
            padding-left: 8px;
            border-left: 3px solid #60a5fa; /* Blue-400 */
        }
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #475569;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-extrabold text-blue-800 mb-2">å€‹æ¡ˆç£å°å ±å‘Šèˆ‡æ¦‚å¿µåŒ–å„€è¡¨æ¿</h1>
            <p class="text-lg text-gray-600">çµæ§‹åŒ–ç´€éŒ„èˆ‡æ·±åº¦è‡¨åºŠåæ€æ¨¡æ¿</p>
            <p id="user-info" class="text-sm text-gray-400 mt-2"></p>
        </header>

        <form id="assessment-form">
            
            <!-- BLOCK I: åŸºç¤è³‡æ–™èˆ‡ç´…ç·šå®‰å…¨ -->
            <div class="card">
                <h2 class="section-title text-red-600">å€å¡Šä¸€ï¼šå€‹æ¡ˆåŸºç¤èˆ‡å°ˆæ¥­å®‰å…¨ç´…ç·š</h2>
                
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="input-group"><label for="client-id">å€‹æ¡ˆä»£è™Ÿ<span class="text-red-500">*</span></label><input type="text" id="client-id" name="clientId" required class="w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div class="input-group"><label for="session-date">æœƒè«‡æ—¥æœŸ<span class="text-red-500">*</span></label><input type="date" id="session-date" name="sessionDate" value="" required class="w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div class="input-group"><label for="client-age">å¹´é½¡</label><input type="number" id="client-age" name="clientAge" class="w-full p-2 border border-gray-300 rounded-lg"></div>
                </div>

                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="input-group">
                        <label>æ€§åˆ¥</label>
                        <select name="clientGender" class="w-full p-2 border border-gray-300 rounded-lg">
                            <option value="æœªé¸">è«‹é¸æ“‡</option>
                            <option value="ç”Ÿç†ç”·">ç”Ÿç†ç”·</option>
                            <option value="ç”Ÿç†å¥³">ç”Ÿç†å¥³</option>
                            <option value="å…¶ä»–/ä¸å…¬é–‹">å…¶ä»–/ä¸å…¬é–‹</option>
                        </select>
                    </div>
                    <div class="input-group col-span-2">
                        <label for="occupation-detail">è·æ¥­ç‹€æ³ï¼ˆé¡å‹ã€åšäº†å¤šä¹…ï¼‰</label>
                        <input type="text" id="occupation-detail" name="occupationDetail" placeholder="ä¾‹ï¼šITå·¥ç¨‹å¸«ï¼Œä»»è·äº”å¹´ï¼›å…¨è·å®¶åº­ä¸»å©¦" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                </div>

                <!-- æ„Ÿæƒ…ç‹€æ³ï¼šä¿®æ”¹ç‚ºé¸æ“‡ + æ¢ä»¶è¼¸å…¥ -->
                <div class="input-group mb-4">
                    <label for="relationship-status">æ„Ÿæƒ…ç‹€æ³</label>
                    <select id="relationship-status" name="relationshipStatus" onchange="toggleRelationshipDetails()" class="w-full p-2 border border-gray-300 rounded-lg">
                        <option value="å–®èº«">å–®èº«/æœªå©š</option>
                        <option value="äº¤å¾€ä¸­">äº¤å¾€ä¸­</option>
                        <option value="å·²å©š">å·²å©š</option>
                        <option value="é›¢å©š">é›¢å©š</option>
                        <option value="å–ªå¶">å–ªå¶</option>
                        <option value="å…¶ä»–">å…¶ä»–/ä¸å…¬é–‹</option>
                    </select>
                    
                    <div id="relationship-details" class="mt-2 p-3 bg-gray-50 rounded-lg hidden">
                        <!-- å·²å©š/äº¤å¾€ä¸­/å–ªå¶çš„é€šç”¨è³‡è¨Š -->
                        <label for="relationship-duration" class="text-sm font-normal">é—œä¿‚æŒçºŒæ™‚é–“ï¼ˆä¾‹ï¼šå·²å©š 12 å¹´ï¼Œäº¤å¾€ 3 å€‹æœˆï¼‰ï¼š</label>
                        <input type="text" id="relationship-duration" name="relationshipDuration" class="w-full p-2 border border-gray-300 rounded-lg text-sm mb-2">

                        <!-- é›¢å©šçš„ç‰¹å®šè³‡è¨Š -->
                        <div id="divorce-details" class="hidden">
                            <label for="divorce-reason" class="text-sm font-normal">é›¢å©šåŸå› èˆ‡æ™‚é•·ï¼š</label>
                            <textarea id="divorce-reason" name="divorceReason" rows="2" placeholder="ä¾‹ï¼šé›¢å©š 3 å¹´ï¼Œä¸»è¦å› åƒ¹å€¼è§€ä¸åˆèˆ‡å¤–é‡" class="w-full p-2 border border-red-200 rounded-lg text-sm"></textarea>
                        </div>
                    </div>
                </div>

                <div class="input-group mb-4">
                    <label for="family-status">å®¶åº­ç‹€æ³ï¼ˆçˆ¶æ¯é—œä¿‚ã€ä¸»è¦ç…§é¡§è€…ã€æ‰‹è¶³ç‹€æ³ï¼‰</label>
                    <textarea id="family-status" name="familyStatus" rows="3" placeholder="ä¾‹ï¼šçˆ¶æ¯é—œä¿‚ç·Šå¼µï¼Œç”±ç¥–çˆ¶æ¯å¸¶å¤§ï¼›æœ‰å…©ä½å“¥å“¥ï¼Œé—œä¿‚ç–é ã€‚" class="w-full p-2 border border-gray-300 rounded-lg text-sm"></textarea>
                </div>
                
                <!-- é†«ç™‚èˆ‡é¢¨éšªï¼šèª¿æ•´çµæ§‹ä½¿å¡«å¯«æ¬„ä½æ›´æ˜ç¢º -->
                <div class="mt-4 input-group">
                    <label>æ˜¯å¦æœè—¥ï¼Ÿï¼ˆé ˆç¢ºèªç²¾ç¥ç§‘é†«å¸«è³‡è¨Šï¼‰</label>
                    <div class="flex items-center gap-4">
                        <input type="radio" id="meds-yes" name="medicationStatus" value="æ˜¯" class="text-blue-600 focus:ring-blue-500" onclick="toggleMedsDetails(true)">
                        <label for="meds-yes" class="text-gray-700">æ˜¯</label>
                        <input type="radio" id="meds-no" name="medicationStatus" value="å¦" class="text-blue-600 focus:ring-blue-500" onclick="toggleMedsDetails(false)">
                        <label for="meds-no" class="text-gray-700">å¦</label>
                    </div>
                    <div id="meds-details" class="mt-2 p-3 bg-blue-50 rounded-lg hidden">
                        <label for="meds-info" class="text-sm font-normal">ğŸ‘‰ **æœè—¥è©³ç´°è³‡è¨Š** (è—¥ç‰©åç¨±ã€åŠ‘é‡åŠä¸Šæ¬¡çœ‹è¨ºæ—¥)ï¼š</label>
                        <textarea id="meds-info" name="medsInfo" class="w-full p-2 border border-blue-300 rounded-lg text-sm" placeholder="è«‹å¡«å¯«ï¼šè—¥ç‰©åç¨±ã€åŠ‘é‡ã€é »ç‡ï¼Œä»¥åŠçœ‹è¨ºç²¾ç¥ç§‘é†«å¸«å§“åèˆ‡é†«é™¢"></textarea>
                    </div>
                </div>

                <div class="mt-4 input-group">
                    <label>è‡ªæ®ºé¢¨éšªè©•ä¼°ï¼ˆè¿‘ä¸‰å€‹æœˆæ„å¿µæˆ–è¡Œç‚ºï¼‰<span class="text-red-500">*</span></label>
                    <div class="flex items-center gap-4">
                        <input type="radio" id="suicide-no" name="suicideRisk" value="ç„¡" class="text-blue-600 focus:ring-blue-500" onclick="toggleRiskWarning(false)" required>
                        <label for="suicide-no" class="text-gray-700">ç„¡</label>
                        <input type="radio" id="suicide-yes" name="suicideRisk" value="æœ‰" class="text-blue-600 focus:ring-blue-500" onclick="toggleRiskWarning(true)">
                        <label for="suicide-yes" class="text-gray-700">æœ‰</label>
                    </div>
                    <div id="risk-warning" class="mt-2 p-3 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-lg hidden">
                        <p class="font-bold">âš ï¸ æ¥µé«˜é¢¨éšªè­¦ç¤ºï¼š</p>
                        <p class="text-sm">è‹¥ç‚ºæ€¥æ€§å±éšªï¼Œè«‹ç«‹å³åœæ­¢å‚¬çœ ï¼Œä¸¦å•Ÿå‹•å±æ©Ÿè™•ç†æˆ–è½‰ä»‹æµç¨‹ã€‚</p>
                        <label for="risk-details" class="text-sm font-normal text-red-700">ğŸ‘‰ **é¢¨éšªè™•ç½®è©³ç´°è³‡è¨Š** (é¢¨éšªç­‰ç´šã€ä¿è­·å› å­ã€è™•ç†æ–¹å¼)ï¼š</label>
                        <textarea id="risk-details" name="riskDetails" placeholder="è«‹è©³ç´°å‚™è¨»ï¼šé¢¨éšªç´šåˆ¥ï¼ˆä½/ä¸­/é«˜ï¼‰ã€å€‹æ¡ˆçš„ä¿è­·å› å­ã€å±æ©Ÿè™•ç†æˆ–è½‰ä»‹æµç¨‹æ˜¯å¦å·²å•Ÿå‹•" class="w-full mt-2 p-2 border border-red-300 rounded-lg text-sm"></textarea>
                    </div>
                </div>
            </div>

            <!-- BLOCK II: å€‹æ¡ˆæ¦‚å¿µåŒ–æ ¸å¿ƒèˆ‡ç—…ç†åˆ†æ -->
            <div class="card bg-yellow-50 border border-yellow-200">
                <h2 class="section-title text-yellow-700">å€å¡ŠäºŒï¼šå€‹æ¡ˆæ¦‚å¿µåŒ–æ ¸å¿ƒèˆ‡ç—…ç†åˆ†æ</h2>
                
                <div class="input-group mb-4">
                    <label for="chief-complaint">ä¸»è¨´èˆ‡é­é‡æƒ…å¢ƒï¼ˆå€‹æ¡ˆç”¨è‡ªå·±çš„è©±æè¿°å›°æ“¾ï¼‰<span class="text-red-500">*</span></label>
                    <textarea id="chief-complaint" name="chiefComplaint" rows="3" placeholder="ç°¡è¿°å€‹æ¡ˆä¾†åˆ°æœƒè«‡å®¤æ™‚ï¼Œä¸»è¦è¡¨é”çš„å›°æ“¾æ˜¯ä»€éº¼ï¼Œä»¥åŠæœ€è¿‘é­é‡äº†ä»€éº¼æ¨£çš„å…·é«”äº‹ä»¶ã€‚" class="w-full p-2 border border-yellow-300 rounded-lg text-sm" required></textarea>
                </div>
                
                <div class="input-group mb-4">
                    <label for="personality-traits">å€‹æ¡ˆçš„å€‹äººç‰¹è³ªèˆ‡å€‹æ€§</label>
                    <textarea id="personality-traits" name="personalityTraits" rows="2" placeholder="ä¾‹ï¼šé«˜åº¦ç†æ€§ã€å–„æ–¼åˆ†æã€è¿½æ±‚å®Œç¾ã€å¤–å‘å‹ç„¦æ…®ã€æƒ…ç·’è¡¨é”å—é™ã€‚" class="w-full p-2 border border-yellow-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="symptom-features">å¿ƒç†èˆ‡ç—…ç†çš„ç—‡ç‹€ç‰¹å¾µï¼ˆè«‹ç”¨è§€å¯Ÿåˆ°çš„äº‹å¯¦ä¾†æè¿°ï¼‰</label>
                    <textarea id="symptom-features" name="symptomFeatures" rows="3" placeholder="ä¾‹ï¼šæŒçºŒæ€§æ†‚é¬±æƒ…ç·’ã€å¼·è¿«æ€§æª¢æŸ¥è¡Œç‚ºã€ç¤¾äº¤ç•æ‡¼ã€ç„¡æ³•å®Œæˆä»»å‹™ï¼ˆé²æ»¯ï¼‰ã€‚" class="w-full p-2 border border-yellow-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="diagnosis-history">ç–¾ç—…æœ‰ç„¡ç¶“éè¨ºæ–·ï¼Ÿä½•æ™‚ç™¼ç—…ï¼Ÿæ²»ç™‚æ–¹å¼ï¼Ÿ</label>
                    <textarea id="diagnosis-history" name="diagnosisHistory" rows="3" placeholder="ä¾‹ï¼šæ›¾è¢«è¨ºæ–·ç‚ºå»£æ³›æ€§ç„¦æ…®ç—‡ï¼ˆGADï¼‰ï¼Œå…©å¹´å‰ç™¼ç—…ï¼Œä¸»è¦ä»¥è—¥ç‰©æ§åˆ¶ï¼Œæœªæ›¾é€²è¡Œé•·æœŸå¿ƒç†æ²»ç™‚ã€‚" class="w-full p-2 border border-yellow-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="contextual-background">å€‹æ¡ˆèƒŒæ™¯æè¿°èˆ‡ç”Ÿå‘½éšæ®µè­°é¡Œï¼ˆè®“å€‹æ¡ˆç«‹é«”åŒ–ï¼‰</label>
                    <p class="text-xs text-gray-500 mb-1">æè¿°å€‹æ¡ˆæ¯å€‹éšæ®µçš„è­°é¡Œã€é—œä¿‚å¦‚ä½•ï¼Œç›¡å¯èƒ½åœ°è®“å€‹æ¡ˆè®Šå¾—æ›´ç«‹é«”ã€‚</p>
                    <textarea id="contextual-background" name="contextualBackground" rows="4" placeholder="ä¾‹ï¼šç«¥å¹´ç’°å¢ƒç¼ºä¹å®‰å…¨æ„Ÿï¼Œå°è‡´æˆäººå¾Œç„¡æ³•ä¿¡ä»»è¦ªå¯†é—œä¿‚ã€‚ç›®å‰æ­£è™•æ–¼è·æ¥­è½‰å‹çš„ä¸­å¹´å±æ©Ÿã€‚" class="w-full p-2 border border-yellow-300 rounded-lg text-sm"></textarea>
                </div>
            </div>

            <!-- BLOCK III: æ·±å…¥æ´å¯Ÿèˆ‡æ½›æ„è­˜è—åœ– -->
            <div class="card bg-blue-50 border border-blue-200">
                <h2 class="section-title text-blue-700">å€å¡Šä¸‰ï¼šæ½›æ„è­˜æ·±åº¦æ´å¯Ÿèˆ‡ç™‚ç™’è—åœ–</h2>
                
                <p class="subsection-title">3.1 æ ¸å¿ƒæ©Ÿåˆ¶åˆ†æ (Core Mechanisms)</p>
                <div class="mb-4 input-group">
                    <label>1. æ½›æ„è­˜æ ¸å¿ƒä¿¡å¿µ (Core Belief)</label>
                    <textarea name="coreBelief" placeholder="è«‹ç²¾ç…‰ä¸€å¥è©±æ¦‚æ‹¬å€‹æ¡ˆçš„æ ¸å¿ƒä¿¡å¿µï¼ˆä¾‹ï¼šæˆ‘ä¸å¤ å¥½ã€æˆ‘å¿…é ˆå®Œç¾æ‰èƒ½è¢«æ„›ï¼‰ã€‚" rows="2" class="w-full p-2 border border-blue-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="mb-4 input-group">
                    <label class="text-lg font-bold text-blue-800">2. ã€ŒåŒ…è£ã€æ©Ÿåˆ¶çš„å‰–æ (Masking Analysis)</label>
                    <p class="text-sm text-gray-500 mb-2">è«‹åƒç…§ä»¥ä¸‹å…‰è­œï¼Œè­˜åˆ¥å€‹æ¡ˆé˜²ç¦¦æ©Ÿåˆ¶çš„æ ¸å¿ƒç›®çš„èˆ‡æ½›æ„è­˜ææ‡¼ï¼š</p>
                    
                    <!-- æ–°å¢çš„åŒ…è£å…‰è­œåƒè€ƒè¡¨ -->
                    <div class="overflow-x-auto mb-4 border border-blue-300 rounded-lg">
                        <table class="min-w-full divide-y divide-blue-200 text-sm">
                            <thead class="bg-blue-100">
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">æ ¸å¿ƒç›®çš„</th>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">æ½›æ„è­˜ææ‡¼</th>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">å…·é«”è¡Œç‚ºè¡¨ç¾</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-blue-200">
                                <tr>
                                    <td class="px-3 py-2 whitespace-nowrap font-medium">é—œä¿‚é€£çµ</td>
                                    <td class="px-3 py-2">ææ‡¼è¢«éºæ£„ã€ä¸å†è¢«æ„›</td>
                                    <td class="px-3 py-2">è¨å¥½ã€è¡¨ç¾å®Œç¾ã€é †å¾</td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 whitespace-nowrap font-medium">è‡ªæˆ‘åƒ¹å€¼</td>
                                    <td class="px-3 py-2">ææ‡¼å¹³åº¸ã€ææ‡¼è¢«çœ‹ä¸èµ·</td>
                                    <td class="px-3 py-2">ç‚«è€€æˆå°±ã€éåº¦åŠªåŠ›</td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 whitespace-nowrap font-medium">ä¿è­·ä»–äºº</td>
                                    <td class="px-3 py-2">ææ‡¼æˆç‚ºè² æ“”ã€æ„§ç–š</td>
                                    <td class="px-3 py-2">å ±å–œä¸å ±æ†‚ã€éš±å¿ç—›è‹¦</td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 whitespace-nowrap font-medium">æƒ…ç·’éš”é›¢</td>
                                    <td class="px-3 py-2">ææ‡¼å´©æ½°ã€ç„¡æ³•è™•ç†è² é¢æƒ…ç·’</td>
                                    <td class="px-3 py-2">ç†æ€§åŒ–ã€ç”šè‡³æˆ´ä¸Šå¿«æ¨‚é¢å…·</td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 whitespace-nowrap font-medium text-red-700">å®‰å…¨é˜²ç¦¦</td>
                                    <td class="px-3 py-2 text-red-700">ææ‡¼å—å‚·ã€ææ‡¼å¤±æ§</td>
                                    <td class="px-3 py-2 text-red-700">å†·æ¼ ã€å¼·å‹¢ã€ä¸åœ¨ä¹</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <label class="text-gray-700 font-medium mt-3 block">è«‹é¸æ“‡å€‹æ¡ˆçš„ä¸»è¦åŒ…è£å‹•æ©Ÿ (å¯è¤‡é¸)</label>
                    <div class="flex flex-wrap gap-2 mt-2 text-sm">
                        <input type="checkbox" id="mask-relational" name="maskMotives" value="é—œä¿‚é€£çµ" class="hidden">
                        <label for="mask-relational" class="rating-label">é—œä¿‚é€£çµ</label>
                        <input type="checkbox" id="mask-selfworth" name="maskMotives" value="è‡ªæˆ‘åƒ¹å€¼" class="hidden">
                        <label for="mask-selfworth" class="rating-label">è‡ªæˆ‘åƒ¹å€¼</label>
                        <input type="checkbox" id="mask-protect" name="maskMotives" value="ä¿è­·ä»–äºº" class="hidden">
                        <label for="mask-protect" class="rating-label">ä¿è­·ä»–äºº</label>
                        <input type="checkbox" id="mask-isolate" name="maskMotives" value="æƒ…ç·’éš”é›¢" class="hidden">
                        <label for="mask-isolate" class="rating-label">æƒ…ç·’éš”é›¢</label>
                        <input type="checkbox" id="mask-defense" name="maskMotives" value="å®‰å…¨é˜²ç¦¦" class="hidden">
                        <label for="mask-defense" class="rating-label bg-red-100 text-red-800">å®‰å…¨é˜²ç¦¦ (å†·æ¼ /å¼·å‹¢)</label>
                    </div>

                    <textarea name="maskNotes" placeholder="å‚™è¨»ï¼šåŒ…è£çš„å…·é«”æ¨£è²Œèˆ‡ä½•æ™‚æœƒé¬†å‹•" rows="2" class="w-full p-2 mt-2 border border-blue-300 rounded-lg text-sm"></textarea>
                </div>

                <p class="subsection-title">3.2 æ·±åº¦æå•</p>
                <div class="mb-4 input-group">
                    <label>3. å€‹æ¡ˆæœ€åŠªåŠ›æƒ³è¦éš±è—çš„ï¼Œæ˜¯å“ªä¸€ç¨®æƒ…ç·’ï¼Ÿ</label>
                    <textarea name="hiddenEmotion" placeholder="è«‹å…·é«”å¯«å‡ºè¢«å£“æŠ‘çš„æƒ…ç·’èˆ‡å…¶å¤–åœ¨è¡¨ç¾ã€‚" rows="2" class="w-full p-2 border border-blue-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="mb-4 input-group">
                    <label>4. å€‹æ¡ˆçš„å…§åœ¨å°å­©ï¼Œç¾åœ¨çœ‹èµ·ä¾†æ˜¯ä»€éº¼æ¨£å­ï¼Ÿ</label>
                    <textarea name="innerChildState" placeholder="è«‹ç”¨è¦–è¦ºåŒ–çš„æ–¹å¼æè¿°å…§åœ¨å°å­©çš„ç‹€æ…‹èˆ‡éœ€æ±‚ã€‚" rows="2" class="w-full p-2 border border-blue-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="mb-4 input-group">
                    <label>5. ç‚ºäº†ç¶­æŒç¾ç‹€ï¼ˆèˆŠæ¨¡å¼ï¼‰ï¼Œå€‹æ¡ˆé¡˜æ„ä»˜å‡ºçš„æœ€å¤§ä»£åƒ¹æ˜¯ä»€éº¼ï¼Ÿ</label>
                    <textarea name="statusQuoCost" placeholder="åˆ†æå€‹æ¡ˆæ½›æ„è­˜ä¸æƒ³æ”¹è®Šçš„åŸå› èˆ‡å…¶ä»£åƒ¹ï¼ˆæ¬¡ç´šç²ç›Šèˆ‡è½‰è®Šé˜»åŠ›ï¼‰ã€‚" rows="2" class="w-full p-2 border border-blue-300 rounded-lg text-sm"></textarea>
                </div>
            </div>
            
            <!-- BLOCK IV: è‡¨åºŠè§€å¯Ÿèˆ‡åŠŸèƒ½æ€§è©•ä¼° -->
            <div class="card">
                <h2 class="section-title">å€å¡Šå››ï¼šè‡¨åºŠè§€å¯Ÿèˆ‡åŠŸèƒ½æ€§è©•ä¼°</h2>
                
                <!-- 1. ä¸»è§€è§€å¯Ÿ -->
                <div class="input-group mb-4">
                    <label for="subjective-observation">å°æ–¼å€‹æ¡ˆçš„ä¸»è§€è§€å¯Ÿï¼ˆç¥æƒ…ã€è¡¨é”ã€è¡£è‘—ã€æ°£å ´ï¼‰<span class="text-red-500">*</span></label>
                    <textarea id="subjective-observation" name="subjectiveObservation" rows="3" placeholder="ä¾‹ï¼šç¥æƒ…ç–²æ†Šä½†çœ¼ç¥éŠ³åˆ©ï¼Œè¡£è‘—æ­£å¼æ•´æ½”ã€‚èªªè©±é€Ÿåº¦å¿«ï¼Œèªæ°£å¸¶æœ‰æ€¥åˆ‡æ„Ÿã€‚" class="w-full p-2 border border-gray-300 rounded-lg text-sm" required></textarea>
                </div>

                <p class="subsection-title">4.1 åŠŸèƒ½æ€§è¡Œç‚ºèˆ‡é¢¨éšª</p>
                <!-- ç¡çœ èˆ‡æ™‚é•· -->
                <div class="mb-4">
                    <label class="font-semibold text-gray-700">1. ç¡çœ è³ªé‡èˆ‡æ™‚é•·ï¼ˆè¿‘ä¸€é€±å¹³å‡ï¼‰<span class="text-red-500">*</span></label>
                    <div class="flex flex-wrap gap-2 mt-2">
                        <input type="radio" id="sleep-1" name="sleepQuality" value="æ­£å¸¸" class="hidden" required><label for="sleep-1" class="rating-label">æ­£å¸¸</label>
                        <input type="radio" id="sleep-2" name="sleepQuality" value="è¼•å¾®å¤±èª¿" class="hidden"><label for="sleep-2" class="rating-label">è¼•å¾®å¤±èª¿</label>
                        <input type="radio" id="sleep-3" name="sleepQuality" value="ä¸­åº¦éšœç¤™" class="hidden"><label for="sleep-3" class="rating-label">ä¸­åº¦éšœç¤™</label>
                        <input type="radio" id="sleep-4" name="sleepQuality" value="åš´é‡éšœç¤™" class="hidden"><label for="sleep-4" class="rating-label bg-red-500 text-white">åš´é‡éšœç¤™</label>
                    </div>
                    <input type="text" name="sleepDurationActual" placeholder="å¯¦éš›å¹³å‡ç¡çœ æ™‚é•·ï¼ˆå°æ™‚/å¤©ï¼‰" class="w-full mt-2 p-2 border border-gray-300 rounded-lg text-sm">
                </div>

                <!-- èƒ½é‡/ç²¾åŠ›æ°´å¹³ -->
                <div class="mb-4">
                    <label class="font-semibold text-gray-700">2. èƒ½é‡/ç²¾åŠ›æ°´å¹³<span class="text-red-500">*</span></label>
                    <div class="flex flex-wrap gap-2 mt-2">
                        <input type="radio" id="energy-1" name="energyLevel" value="æ­£å¸¸" class="hidden" required><label for="energy-1" class="rating-label">æ­£å¸¸ç¯„åœï¼ˆå¹³ç©©ï¼‰</label>
                        <input type="radio" id="energy-2" name="energyLevel" value="æŒçºŒä½è½" class="hidden"><label for="energy-2" class="rating-label bg-yellow-100 text-yellow-800">æŒçºŒä½è½ï¼ˆé¬±æœŸå‚¾å‘ï¼‰</label>
                        <input type="radio" id="energy-3" name="energyLevel" value="è¼•åº¦äº¢å¥®" class="hidden"><label for="energy-3" class="rating-label bg-orange-100 text-orange-800">è¼•åº¦äº¢å¥®ï¼ˆè©±å¤šï¼‰</label>
                        <input type="radio" id="energy-4" name="energyLevel" value="é«˜åº¦äº¢å¥®" class="hidden"><label for="energy-4" class="rating-label bg-red-100 text-red-800">é«˜åº¦äº¢å¥®ï¼ˆèºæœŸå‚¾å‘ï¼‰</label>
                    </div>
                </div>
                
                <!-- ç¤¾äº¤èˆ‡è·æ¥­åŠŸèƒ½ï¼ˆè¡å‹•æ€§èˆ‡é¢¨éšªè¡Œç‚ºï¼‰ -->
                <div class="mb-4">
                    <label class="font-semibold text-gray-700">3. ç¤¾äº¤èˆ‡è·æ¥­åŠŸèƒ½ï¼ˆè¡å‹•æ€§èˆ‡é¢¨éšªè¡Œç‚ºï¼‰</label>
                    <div class="flex flex-wrap gap-2 mt-2 text-sm">
                        <input type="checkbox" id="tag-work-difficult" name="riskTags" value="å·¥ä½œæœ‰å›°é›£" class="hidden"><label for="tag-work-difficult" class="rating-label bg-gray-100">å·¥ä½œæœ‰å›°é›£</label>
                        <input type="checkbox" id="tag-impulse-spending" name="riskTags" value="è¡å‹•æ¶ˆè²»/é«˜é¢¨éšªæ±ºç­–" class="hidden"><label for="tag-impulse-spending" class="rating-label bg-red-100 text-red-800">è¡å‹•æ¶ˆè²»/é«˜é¢¨éšªæ±ºç­–</label>
                        <input type="checkbox" id="tag-drug-abuse" name="riskTags" value="è—¥ç‰©æ¿«ç”¨æˆ–æˆ’æ–·" class="hidden"><label for="tag-drug-abuse" class="rating-label bg-red-100 text-red-800">è—¥ç‰©æ¿«ç”¨æˆ–æˆ’æ–·</label>
                        <input type="checkbox" id="tag-relationship-conflict" name="riskTags" value="é—œä¿‚è¡çªæˆ–æ¯€æ" class="hidden"><label for="tag-relationship-conflict" class="rating-label bg-yellow-100 text-yellow-800">é—œä¿‚è¡çªæˆ–æ¯€æ</label>
                    </div>
                    <textarea name="functionalNotes" placeholder="åŠŸèƒ½æ€§è¡Œç‚ºçš„å®¢è§€äº‹å¯¦ç´€éŒ„ï¼ˆä¾‹ï¼šå·²é€£çºŒå…©é€±è«‹å‡ã€æ˜¨å¤©è²·äº†ä¸€å°æ–°è»Šï¼‰" class="w-full mt-2 p-2 border border-gray-300 rounded-lg text-sm"></textarea>
                </div>

                <p class="subsection-title">4.2 æ½›æ„è­˜ä¿¡è™Ÿèˆ‡éèªè¨€è§€å¯Ÿ</p>
                <!-- èªæ°£èˆ‡è²èª¿ä¸€è‡´æ€§ -->
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label class="font-semibold text-gray-700">èªæ°£èˆ‡å…§å®¹ä¸€è‡´æ€§<span class="text-red-500">*</span></label>
                        <div class="flex flex-wrap gap-2 mt-2 text-sm">
                            <input type="radio" id="tone-1" name="toneConsistency" value="ä¸€è‡´" class="hidden" required><label for="tone-1" class="rating-label bg-green-100 text-green-800">ğŸŸ¢ ä¸€è‡´</label>
                            <input type="radio" id="tone-2" name="toneConsistency" value="è¼•å¾®è„«ç¯€" class="hidden"><label for="tone-2" class="rating-label bg-yellow-100 text-yellow-800">ğŸŸ¡ è¼•å¾®è„«ç¯€</label>
                            <input type="radio" id="tone-3" name="toneConsistency" value="åš´é‡è„«ç¯€" class="hidden"><label for="tone-3" class="rating-label bg-red-100 text-red-800">ğŸ”´ åš´é‡è„«ç¯€</label>
                        </div>
                        <textarea name="toneNotes" placeholder="ï¼ˆä¾‹ï¼šç”¨æ„‰æ‚…çš„èªæ°£æè¿°å¤±æ¥­ï¼‰" class="w-full mt-2 p-2 border border-gray-300 rounded-lg text-sm"></textarea>
                    </div>

                    <!-- è‚¢é«”èªè¨€èˆ‡å¾®è¡¨æƒ… -->
                    <div class="mb-4">
                        <label class="font-semibold text-gray-700">è‚¢é«”èªè¨€èˆ‡å¾®è¡¨æƒ…æ¨™ç±¤</label>
                        <div class="flex flex-wrap gap-2 mt-2 text-sm">
                            <input type="checkbox" id="body-tense" name="bodyCues" value="è‚©é ¸åƒµç¡¬" class="hidden"><label for="body-tense" class="rating-label bg-gray-100">è‚©é ¸åƒµç¡¬</label>
                            <input type="checkbox" id="body-fidget" name="bodyCues" value="æ‰‹éƒ¨æ“æ‰/æŠ–å‹•" class="hidden"><label for="body-fidget" class="rating-label bg-gray-100">æ‰‹éƒ¨æ“æ‰/æŠ–å‹•</label>
                            <input type="checkbox" id="body-avoidance" name="bodyCues" value="æŒçºŒé–ƒèº²çœ¼ç¥" class="hidden"><label for="body-avoidance" class="rating-label bg-gray-100">æŒçºŒé–ƒèº²çœ¼ç¥</label>
                            <input type="checkbox" id="body-micro" name="bodyCues" value="çŸ­æš«ææ‡¼/æ‚²å‚·å¾®è¡¨æƒ…" class="hidden"><label for="body-micro" class="rating-label bg-yellow-100 text-yellow-800">çŸ­æš«ææ‡¼/æ‚²å‚·å¾®è¡¨æƒ…</label>
                        </div>
                        <textarea name="bodyNotes" placeholder="ï¼ˆä¾‹ï¼šæåˆ°å®¶äººæ™‚ï¼Œçœ¼è§’æœ‰ 1 ç§’çš„æŠ½å‹•ï¼‰" class="w-full mt-2 p-2 border border-gray-300 rounded-lg text-sm"></textarea>
                    </div>
                </div>
            </div>

            <!-- BLOCK V: æ²»ç™‚æ­·ç¨‹èˆ‡ç­–ç•¥ -->
            <div class="card bg-green-50 border border-green-200">
                <h2 class="section-title text-green-700">å€å¡Šäº”ï¼šæ²»ç™‚æ­·ç¨‹èˆ‡ç­–ç•¥è¦åŠƒ</h2>

                <p class="subsection-title">5.1 é—œä¿‚å»ºç«‹èˆ‡å‚¬çœ é å‚™åº¦</p>
                <!-- ä¿¡ä»»åº¦èˆ‡é—œä¿‚å»ºç«‹ -->
                <div class="mb-4">
                    <label class="font-semibold text-gray-700">1. ä¿¡ä»»åº¦èˆ‡é—œä¿‚å»ºç«‹ï¼ˆå‚¬çœ å¸«åˆ¤æ–·ï¼‰<span class="text-red-500">*</span></label>
                    <div class="flex flex-wrap gap-2 mt-2 text-xs md:text-sm">
                        <input type="radio" id="trust-1" name="trustLevel" value="1. é˜²è¡›è³ªç–‘" class="hidden" required><label for="trust-1" class="rating-label">1. é˜²è¡›è³ªç–‘</label>
                        <input type="radio" id="trust-2" name="trustLevel" value="2. è¢«å‹•é…åˆ" class="hidden"><label for="trust-2" class="rating-label">2. è¢«å‹•é…åˆ</label>
                        <input type="radio" id="trust-3" name="trustLevel" value="3. é¡˜æ„é–‹æ”¾" class="hidden"><label for="trust-3" class="rating-label">3. é¡˜æ„é–‹æ”¾</label>
                        <input type="radio" id="trust-4" name="trustLevel" value="4. é«˜åº¦ä¿¡ä»»" class="hidden"><label for="trust-4" class="rating-label">4. é«˜åº¦ä¿¡ä»»</label>
                        <input type="radio" id="trust-5" name="trustLevel" value="5. éåº¦ä¾è³´ï¼ˆè­¦æƒ•ï¼‰" class="hidden"><label for="trust-5" class="rating-label bg-red-100 text-red-800">5. éåº¦ä¾è³´ï¼ˆè­¦æƒ•ï¼‰</label>
                    </div>
                </div>

                <!-- å‚¬çœ æ„Ÿå—æ€§ -->
                <div class="mb-4">
                    <label class="font-semibold text-gray-700">2. å‚¬çœ æ„Ÿå—æ€§ï¼ˆåˆæ¬¡å¼•å°ç·´ç¿’å¾Œåˆ¤æ–·ï¼‰<span class="text-red-500">*</span></label>
                    <div class="flex flex-wrap gap-2 mt-2 text-sm">
                        <input type="radio" id="trance-1" name="tranceResponsiveness" value="æŠ—æ‹’/é˜»æ–·" class="hidden" required><label for="trance-1" class="rating-label bg-red-100 text-red-800">æŠ—æ‹’/é˜»æ–·</label>
                        <input type="radio" id="trance-2" name="tranceResponsiveness" value="å¾®å¼±åæ‡‰" class="hidden"><label for="trance-2" class="rating-label">å¾®å¼±åæ‡‰</label>
                        <input type="radio" id="trance-3" name="tranceResponsiveness" value="ä¸­åº¦åæ‡‰" class="hidden"><label for="trance-3" class="rating-label">ä¸­åº¦åæ‡‰</label>
                        <input type="radio" id="trance-4" name="tranceResponsiveness" value="é«˜åº¦åæ‡‰" class="hidden"><label for="trance-4" class="rating-label bg-green-100 text-green-800">é«˜åº¦åæ‡‰</label>
                    </div>
                    <textarea name="tranceNotes" placeholder="å‚¬çœ åæ‡‰è§€å¯Ÿå‚™è¨»ï¼ˆä¾‹ï¼šæ‰‹éƒ¨æ¼‚æµ®æ™‚ï¼Œè‚¢é«”æœ‰è¼•å¾®é¡«æŠ–ï¼Œä½†çœ¼ç›æœªå®Œå…¨é–‰åˆï¼‰" class="w-full mt-2 p-2 border border-gray-300 rounded-lg text-sm"></textarea>
                </div>

                <p class="subsection-title">5.2 æ­·ç¨‹ç¸½çµèˆ‡è¨ˆç•«</p>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="input-group"><label for="total-sessions">ç¸½å…±æ¬¡æ•¸</label><input type="number" id="total-sessions" name="totalSessions" placeholder="ä¾‹ï¼š8" class="w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div class="input-group col-span-2"><label for="session-frequency">é »ç‡èˆ‡å¹³å‡æ™‚é•·</label><input type="text" id="session-frequency" name="sessionFrequency" placeholder="ä¾‹ï¼šæ¯é€±ä¸€æ¬¡ï¼Œæ¯æ¬¡ 90 åˆ†é˜" class="w-full p-2 border border-gray-300 rounded-lg"></div>
                </div>

                <div class="input-group mb-4">
                    <label for="client-expectations">å€‹æ¡ˆçš„æœŸå¾…èˆ‡ä¸»è¦å›°æ“¾<span class="text-red-500">*</span></label>
                    <textarea id="client-expectations" name="clientExpectations" rows="2" placeholder="å€‹æ¡ˆå¸Œæœ›é”æˆçš„å…·é«”ç›®æ¨™èˆ‡ç•¶å‰çš„æ ¸å¿ƒå›°æ“¾ï¼ˆç”¨å€‹æ¡ˆçš„èªè¨€ï¼‰ã€‚" class="w-full p-2 border border-green-300 rounded-lg text-sm" required></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="approach-plan">å°æ–¼å€‹æ¡ˆæ¡ç”¨çš„å–å‘ã€ç†è«–åŠè™•é‡è¨ˆç•«<span class="text-red-500">*</span></label>
                    <textarea id="approach-plan" name="approachPlan" rows="3" placeholder="ä¾‹ï¼šå‰µå‚·çŸ¥æƒ…ç…§è­·å–å‘ã€çµåˆå…§åœ¨å®¶åº­ç³»çµ±(IFS)æ¨¡å‹ã€‚è™•é‡è¨ˆç•«ï¼šå‰å››æ¬¡å»ºç«‹å®‰å…¨åŸºåœ°ï¼Œå¾ŒçºŒè™•ç†å‰µå‚·è¨˜æ†¶ï¼Œæœ€å¾Œæ•´åˆè³‡æºã€‚" class="w-full p-2 border border-green-300 rounded-lg text-sm" required></textarea>
                </div>
                
                <div class="mb-4 input-group">
                    <label>3. å‚¬çœ ç­–ç•¥èˆ‡è³‡æºå»ºæ§‹ç›®æ¨™<span class="text-red-500">*</span></label>
                    <p class="text-xs text-gray-500 mb-1">åŸºæ–¼æ¦‚å¿µåŒ–ï¼Œè¨­å®šçŸ­æœŸï¼ˆç©©å®šï¼‰èˆ‡é•·æœŸï¼ˆè½‰åŒ–ï¼‰ç›®æ¨™ã€‚</p>
                    <textarea name="strategyTarget" placeholder="çŸ­æœŸç›®æ¨™ï¼šç©©å®šæƒ…ç·’èˆ‡ç¡çœ ï¼›é•·æœŸç›®æ¨™ï¼šæ”¾ä¸‹å®Œç¾é¢å…·ï¼Œæ¥ç´å…§åœ¨è„†å¼±ï¼Œå»ºç«‹å…§åœ¨å®‰å…¨åŸºåœ°ã€‚" rows="3" class="w-full p-2 border border-blue-300 rounded-lg text-sm" required></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="progress-summary">ç™‚ç¨‹é€²å±•èˆ‡ä¸»è¨´çš„æ”¹è®Šï¼ˆæ‘˜è¦é‡è¦ç¯€é»ï¼‰</label>
                    <textarea id="progress-summary" name="progressSummary" rows="4" placeholder="æ‘˜è¦å‡ºç•¶ä¸­é‡è¦çš„ç¯€é»ï¼ˆä¾‹ï¼šç¬¬ä¸‰æ¬¡æœƒè«‡ï¼šå€‹æ¡ˆç¬¬ä¸€æ¬¡åœ¨æœƒè«‡ä¸­è½æ·šï¼›ç¬¬å…«æ¬¡æœƒè«‡ï¼šä¸»è¨´çš„å¼·è¿«æ€§è¡Œç‚ºé »ç‡é™ä½ 30%ï¼‰ã€‚" class="w-full p-2 border border-green-300 rounded-lg text-sm"></textarea>
                </div>
            </div>

            <!-- BLOCK VI: æ­·ç¨‹è§€å¯Ÿèˆ‡ç£å°å•é¡Œ -->
            <div class="card bg-purple-50 border border-purple-200">
                <h2 class="section-title text-purple-700">å€å¡Šå…­ï¼šæ­·ç¨‹è§€å¯Ÿèˆ‡ç£å°å•é¡Œ</h2>

                <div class="input-group mb-4">
                    <label for="special-incidents">ç‰¹æ®Šäº‹ä»¶çš„ç™¼ç”Ÿèˆ‡è½‰æŠ˜é»</label>
                    <p class="text-xs text-gray-500 mb-1">è¨˜éŒ„è«®å•†æ­·ç¨‹ä¸­å‡ºç¾çš„ä»»ä½•ç‰¹æ®Šäº’å‹•ã€å›°é›£è™•ã€æˆ–è½‰æŠ˜é»ã€‚ä¾‹ï¼šé›™é‡é—œä¿‚çš„å‡ºç¾ã€è«®å•†é—œä¿‚çš„è®ŠåŒ–ã€æˆ–çªç™¼äº‹ä»¶çš„è™•ç†ç­‰ã€‚</p>
                    <textarea id="special-incidents" name="specialIncidents" rows="3" placeholder="ä¾‹ï¼šç¬¬äº”æ¬¡æœƒè«‡å¾Œï¼Œå€‹æ¡ˆçªç„¶å‚³è¨Šè©¢å•ç§äººå•é¡Œï¼›ç¬¬ä¹æ¬¡æœƒè«‡ï¼Œå€‹æ¡ˆå°å‚¬çœ å¸«çš„å¼•å°ç”¢ç”Ÿå¼·çƒˆæŠ—æ‹’ï¼Œé—œä¿‚é€²å…¥è½‰æŠ˜é»ã€‚" class="w-full p-2 border border-purple-300 rounded-lg text-sm"></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="supervision-questions">å°æ–¼é€™å€‹å€‹æ¡ˆæƒ³è¦åœ¨ç£å°ä¸­è¨è«–çš„å•é¡Œ<span class="text-red-500">*</span></label>
                    <p class="text-xs text-gray-500 mb-1">æ˜ç¢ºæå‡ºæ‚¨åœ¨æŠ€è¡“æˆ–åæ€ä¸Šé‡åˆ°çš„å›°å¢ƒã€‚</p>
                    <textarea id="supervision-questions" name="supervisionQuestions" rows="3" placeholder="ä¾‹ï¼š1. å¦‚ä½•è™•ç†å€‹æ¡ˆåœ¨é€²å…¥æ·±åº¦å‚¬çœ æ™‚ï¼Œç¸½æ˜¯å‡ºç¾èº«é«”ç·Šç¹ƒçš„ç‹€æ³ï¼Ÿ 2. æˆ‘å°å€‹æ¡ˆçš„æ†¤æ€’æ„Ÿåˆ°ç„¦æ…®ï¼Œè©²å¦‚ä½•é€²è¡Œè‡ªæˆ‘è¦ºå¯Ÿï¼Ÿ" class="w-full p-2 border border-purple-300 rounded-lg text-sm" required></textarea>
                </div>

                <div class="input-group mb-4">
                    <label for="deep-dive-points">å°æ–¼é€™å€‹å€‹æ¡ˆå¯ä»¥å†æ·±å…¥æ¢è¨çš„é»</label>
                    <textarea id="deep-dive-points" name="deepDivePoints" rows="2" placeholder="ä¾‹ï¼šå€‹æ¡ˆèˆ‡æ¯è¦ªçš„å…±ç”Ÿé—œä¿‚æ˜¯å¦ç‚ºæ ¸å¿ƒï¼Ÿç›®å‰æˆ‘ä½¿ç”¨çš„å‰µå‚·ä»‹å…¥æ˜¯å¦å¤ªå¿«ï¼Ÿ" class="w-full p-2 border border-purple-300 rounded-lg text-sm"></textarea>
                </div>
            </div>

            <!-- ç¸½çµèˆ‡è¡Œå‹•å»ºè­° -->
            <div class="card text-center bg-gray-100 border border-gray-300">
                <h2 class="section-title text-gray-700">æœ€çµ‚è¡Œå‹•å»ºè­°ï¼ˆå‚¬çœ å¸«è‡ªæˆ‘åˆ¤æ–·ï¼‰<span class="text-red-500">*</span></h2>
                <div class="flex justify-center gap-4 mb-4">
                    <input type="radio" id="action-green" name="actionPlan" value="å¯é€²è¡Œå‚¬çœ ï¼ˆç¶ ç‡ˆï¼‰" class="hidden" required>
                    <label for="action-green" class="rating-label bg-green-600 text-white font-bold hover:bg-green-700">âœ… å¯é€²è¡Œå‚¬çœ ï¼ˆç¶ ç‡ˆï¼‰</label>
                    <input type="radio" id="action-yellow" name="actionPlan" value="æš«ç·©è§€å¯Ÿï¼ˆé»ƒç‡ˆï¼‰" class="hidden">
                    <label for="action-yellow" class="rating-label bg-yellow-600 text-white font-bold hover:bg-yellow-700">âš ï¸ æš«ç·©è§€å¯Ÿï¼ˆé»ƒç‡ˆï¼‰</label>
                    <input type="radio" id="action-red" name="actionPlan" value="ç«‹å³è½‰ä»‹ï¼ˆç´…ç‡ˆï¼‰" class="hidden">
                    <label for="action-red" class="rating-label bg-red-600 text-white font-bold hover:bg-red-700">âŒ ç«‹å³è½‰ä»‹ï¼ˆç´…ç‡ˆï¼‰</label>
                </div>

                <button type="submit" class="w-full md:w-1/2 p-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors shadow-lg">
                    ğŸ’¾ ç”Ÿæˆ Word ç£å°å ±å‘Šï¼ˆ.docï¼‰
                </button>
            </div>
        </form>
    </div>

    <script>
        // -- Firebase / Environment Mock Setup --
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'hypnosis-dashboard-101';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // Mock User ID generation since Firebase is not fully implemented in this prototype
        const userId = 'hypnotist-' + crypto.randomUUID().substring(0, 8); 

        document.getElementById('user-info').textContent = `App ID: ${appId} | ä½¿ç”¨è€… ID: ${userId} | ${new Date().toLocaleString('zh-TW')}`;
        // Set today's date as default
        document.getElementById('session-date').value = new Date().toISOString().substring(0, 10);

        function toggleMedsDetails(show) {
            document.getElementById('meds-details').classList.toggle('hidden', !show);
        }

        function toggleRiskWarning(show) {
            document.getElementById('risk-warning').classList.toggle('hidden', !show);
        }
        
        // æ ¹æ“šæ„Ÿæƒ…ç‹€æ³é¡¯ç¤ºæˆ–éš±è—ç´°ç¯€
        function toggleRelationshipDetails() {
            const status = document.getElementById('relationship-status').value;
            const detailsDiv = document.getElementById('relationship-details');
            const divorceDiv = document.getElementById('divorce-details');
            const durationInput = document.getElementById('relationship-duration');
            const divorceReasonInput = document.getElementById('divorce-reason');

            if (status === 'å–®èº«' || status === 'å…¶ä»–') {
                detailsDiv.classList.add('hidden');
                divorceDiv.classList.add('hidden');
                durationInput.value = ''; // æ¸…ç©ºæ¬„ä½
                divorceReasonInput.value = ''; // æ¸…ç©ºæ¬„ä½
            } else {
                detailsDiv.classList.remove('hidden');
                
                if (status === 'é›¢å©š') {
                    divorceDiv.classList.remove('hidden');
                    durationInput.placeholder = 'ä¾‹ï¼šé›¢å©šæ™‚é•· 3 å¹´';
                } else {
                    divorceDiv.classList.add('hidden');
                    durationInput.placeholder = 'ä¾‹ï¼šå·²å©š 12 å¹´ï¼Œäº¤å¾€ 3 å€‹æœˆ';
                    divorceReasonInput.value = ''; // æ¸…ç©ºæ¬„ä½
                }
            }
        }

        /**
         * ã€é—œéµä¿®æ­£ã€‘HTML è½‰ç¾©å‡½æ•¸ï¼Œç”¨æ–¼å®‰å…¨åœ°å°‡ç”¨æˆ¶è¼¸å…¥æ’å…¥åˆ° HTML å­—ä¸²ä¸­
         * å°ˆé–€è™•ç†æ‰€æœ‰å¯èƒ½ç ´å£ JavaScript Template Literal (`) çµæ§‹çš„å­—å…ƒã€‚
         * @param {string} unsafe - ä¾†è‡ªç”¨æˆ¶è¼¸å…¥çš„åŸå§‹å­—ä¸²
         * @returns {string} è½‰ç¾©å¾Œçš„å­—ä¸²
         */
        function escapeHtml(unsafe) {
            if (typeof unsafe !== 'string') return unsafe;
            return unsafe.replace(/&/g, "&amp;")
                         .replace(/</g, "&lt;")
                         .replace(/>/g, "&gt;")
                         .replace(/"/g, "&quot;")
                         .replace(/'/g, "&#039;")
                         // 1. è™•ç†æ‰€æœ‰æ›è¡Œç¬¦è™Ÿ (\r\n, \n, \r) è½‰æ›ç‚º <br/>ï¼Œé˜²æ­¢ç ´å£ JS æ¨¡æ¿å­—ä¸²
                         .replace(/(\r\n|\n|\r)/g, "<br/>") 
                         // 2. è™•ç† JavaScript Template Literal çš„é—œéµå­—å…ƒï¼šåå¼•è™Ÿ (`)
                         .replace(/`/g, "&#x60;") 
                         // 3. è™•ç†åæ–œç·š (\)ï¼Œé˜²æ­¢å®ƒæ„å¤–è½‰ç¾© JS æ¨¡æ¿å­—ä¸²ä¸­çš„å…¶ä»–å­—å…ƒ
                         .replace(/\\/g, "&#92;"); 
        }


        // --- Word Generation Logic ---

        function generateWordContent(data) {
            
            // 1. å°æ‰€æœ‰è¼¸å…¥æ•¸æ“šé€²è¡Œè½‰ç¾©ï¼Œä»¥é¿å…èªæ³•éŒ¯èª¤å’Œ HTML æ³¨å…¥
            const escapedData = {};
            for (const key in data) {
                const value = data[key];
                if (Array.isArray(value)) {
                    escapedData[key] = value.map(item => escapeHtml(item));
                } else {
                    escapedData[key] = escapeHtml(value);
                }
            }
            
            const date = new Date().toLocaleString('zh-TW', { dateStyle: 'long', timeStyle: 'short' });
            const clientId = escapedData.clientId || 'N/A';
            
            // è™•ç†æ„Ÿæƒ…ç‹€æ³çš„è¼¸å‡ºæ–‡å­—
            let relationshipDetailText = escapedData.relationshipStatus || 'æœªé¸';
            if (escapedData.relationshipStatus !== 'å–®èº«' && escapedData.relationshipStatus !== 'å…¶ä»–' && escapedData.relationshipDuration) {
                relationshipDetailText += ` (${escapedData.relationshipDuration})`;
            }
            if (escapedData.relationshipStatus === 'é›¢å©š' && escapedData.divorceReason) {
                 relationshipDetailText += ` | é›¢å©šç´°ç¯€ï¼š${escapedData.divorceReason}`;
            }

            // è¼”åŠ©å‡½æ•¸ï¼šå°‡ç°¡çŸ­è³‡æ–™æ ¼å¼åŒ–ç‚º (æ¨™ç±¤: ç­”æ¡ˆæ¨™ç±¤)
            function formatShortData(label, dataValue) {
                return `<p><span class="answer-label">${label}ï¼š</span> <span class="answer-data">${dataValue || 'æœªå¡«'}</span></p>`;
            }

            // è¼”åŠ©å‡½æ•¸ï¼šå°‡é•·ç¯‡è³‡æ–™æ ¼å¼åŒ–ç‚º (æ¨™é¡Œ) + (ç­”æ¡ˆæ¡†)
            function formatLongData(title, dataValue) {
                return `<h2>${title}</h2><div class="long-answer-box">${dataValue || 'æœªå¡«å¯«'}</div>`;
            }

            // ä½¿ç”¨è½‰ç¾©å¾Œçš„æ•¸æ“š (escapedData) ä¾†æ§‹å»º HTML å…§å®¹
            let htmlContent = `
            <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
            <head>
                <meta charset='utf-8'>
                <title>å€‹æ¡ˆç£å°å ±å‘Šèˆ‡æ¦‚å¿µåŒ–ç´€éŒ„ - ${clientId}</title>
                <style>
                    body { font-family: "Microsoft JhengHei", sans-serif; line-height: 1.6; padding: 20px; max-width: 800px; margin: auto; }
                    h1 { color: #1e40af; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; margin-top: 30px; font-size: 1.5em; }
                    h2 { color: #374151; font-size: 1.2em; border-left: 5px solid #60a5fa; padding-left: 10px; margin-top: 20px; }
                    p { margin-bottom: 10px; }
                    strong { color: #1f2937; }
                    
                    /* æ–°å¢ï¼šå€åˆ†å•é¡Œèˆ‡ç­”æ¡ˆçš„æ¨£å¼ */
                    .answer-label { font-weight: 600; color: #374151; display: inline-block; min-width: 150px; }
                    .answer-data { color: #1f2937; background-color: #f0f4f8; padding: 2px 8px; border-radius: 4px; border: 1px solid #e2e8f0; display: inline-block; font-weight: 500; }
                    .long-answer-box { background-color: #ffffff; border: 1px dashed #cccccc; padding: 12px; margin-top: 5px; border-radius: 6px; color: #333333; }

                    .summary-box { background-color: #f3f4f6; padding: 15px; border: 1px solid #e2e8f0; border-radius: 5px; margin-bottom: 20px; }
                    .mask-table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 0.9em; }
                    .mask-table th, .mask-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    .mask-table th { background-color: #eef2ff; color: #374151; }
                </style>
            </head>
            <body>
                <h1 style="text-align: center;">å€‹æ¡ˆç£å°å ±å‘Šèˆ‡æ¦‚å¿µåŒ–ç´€éŒ„</h1>
                <p style="text-align: right; color: #6b7280; font-size: 0.8em;"><strong>å ±å‘Šç”Ÿæˆæ™‚é–“ï¼š</strong> ${date}</p>
                <div class="summary-box">
                    <h2>æ•´é«”æ¦‚è¦½</h2>
                    ${formatShortData('å€‹æ¡ˆä»£è™Ÿ', escapedData.clientId)}
                    ${formatShortData('æœƒè«‡æ—¥æœŸ', escapedData.sessionDate)}
                    ${formatShortData('å¹´é½¡/æ€§åˆ¥', `${escapedData.clientAge || 'æœªå¡«'} æ­² / ${escapedData.clientGender || 'æœªé¸'}`)}
                    <p><span class="answer-label">æœ€çµ‚è¡Œå‹•å»ºè­°ï¼š</span> <span class="answer-data" style="font-weight: bold; color: ${escapedData.actionPlan === 'ç«‹å³è½‰ä»‹ï¼ˆç´…ç‡ˆï¼‰' ? 'red' : escapedData.actionPlan === 'æš«ç·©è§€å¯Ÿï¼ˆé»ƒç‡ˆï¼‰' ? 'orange' : 'green'}; background-color: #fff; border:none;">${escapedData.actionPlan || 'æœªé¸'}</span></p>
                </div>
            `;

            // --- I. åŸºç¤è³‡æ–™èˆ‡å®‰å…¨ç´…ç·š ---
            htmlContent += `
                <h1>I. å€‹æ¡ˆåŸºç¤è³‡æ–™èˆ‡å®‰å…¨ç´…ç·š</h1>
                <h2>1. åŸºæœ¬è³‡æ–™</h2>
                ${formatShortData('æœƒè«‡æ—¥æœŸ', escapedData.sessionDate)}
                ${formatShortData('è·æ¥­ç‹€æ³', escapedData.occupationDetail)}
                ${formatShortData('æ„Ÿæƒ…ç‹€æ³', relationshipDetailText)}
                ${formatLongData('å®¶åº­ç‹€æ³ï¼ˆçˆ¶æ¯ã€æ‰‹è¶³ã€ç…§é¡§è€…ï¼‰', escapedData.familyStatus)}
                
                <h2>2. é†«ç™‚èˆ‡é¢¨éšªè©•ä¼°</h2>
                ${formatShortData('æœè—¥ç‹€æ³', escapedData.medicationStatus)}
                ${escapedData.medicationStatus === 'æ˜¯' ? `<p style="margin-left: 20px; padding: 5px; border: 1px solid #dbeafe; background-color: #eff6ff;"><strong style="color:#1e40af;">ğŸ’Š æœè—¥è©³ç´°è³‡è¨Šï¼š</strong> ${escapedData.medsInfo || 'ç„¡'}</p>` : ''}
                
                ${formatShortData('è‡ªæ®ºé¢¨éšªè©•ä¼°', escapedData.suicideRisk)}
                ${escapedData.suicideRisk === 'æœ‰' ? `<p style="margin-left: 20px; padding: 5px; border: 1px solid #fee2e2; background-color: #fef2f2; color:red;"><strong>âš ï¸ é¢¨éšªè™•ç½®è©³ç´°è³‡è¨Šï¼š</strong> ${escapedData.riskDetails || 'è«‹ç·Šæ€¥è™•ç†'}</p>` : ''}
            `;

            // --- II. å€‹æ¡ˆæ¦‚å¿µåŒ–æ ¸å¿ƒèˆ‡ç—…ç†åˆ†æ ---
            htmlContent += `
                <h1>II. å€‹æ¡ˆæ¦‚å¿µåŒ–æ ¸å¿ƒèˆ‡ç—…ç†åˆ†æ</h1>
                ${formatLongData('ä¸»è¨´èˆ‡é­é‡æƒ…å¢ƒ', escapedData.chiefComplaint)}
                
                <h2>2. å€‹äººç‰¹è³ªèˆ‡ç—…ç†æè¿°</h2>
                ${formatLongData('ç‰¹è³ªèˆ‡å€‹æ€§', escapedData.personalityTraits)}
                ${formatLongData('ç—‡ç‹€ç‰¹å¾µ', escapedData.symptomFeatures)}
                ${formatLongData('è¨ºæ–·èˆ‡ç—…å²', escapedData.diagnosisHistory)}
                
                <h2>3. èƒŒæ™¯èˆ‡ç”Ÿå‘½éšæ®µè­°é¡Œï¼ˆè®“å€‹æ¡ˆç«‹é«”åŒ–ï¼‰</h2>
                ${formatLongData('èƒŒæ™¯èˆ‡ç”Ÿå‘½éšæ®µè­°é¡Œ', escapedData.contextualBackground)}
            `;

            // --- III. æ½›æ„è­˜æ·±åº¦æ´å¯Ÿèˆ‡ç™‚ç™’è—åœ– (å·²æ›´æ–°) ---
            htmlContent += `
                <h1>III. æ½›æ„è­˜æ·±åº¦æ´å¯Ÿèˆ‡ç™‚ç™’è—åœ–</h1>
                <h2>1. æ ¸å¿ƒä¿¡å¿µèˆ‡æ©Ÿåˆ¶åˆ†æ</h2>
                ${formatLongData('æ ¸å¿ƒä¿¡å¿µ', escapedData.coreBelief)}
                
                <h3>åŒ…è£ï¼ˆMaskingï¼‰æ©Ÿåˆ¶å…‰è­œåƒè€ƒ</h3>
                <table class="mask-table">
                    <thead>
                        <tr>
                            <th>æ ¸å¿ƒç›®çš„</th>
                            <th>æ½›æ„è­˜ææ‡¼</th>
                            <th>å…·é«”è¡Œç‚ºè¡¨ç¾</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>é—œä¿‚é€£çµ</td><td>ææ‡¼è¢«éºæ£„ã€ä¸å†è¢«æ„›</td><td>è¨å¥½ã€è¡¨ç¾å®Œç¾ã€é †å¾</td></tr>
                        <tr><td>è‡ªæˆ‘åƒ¹å€¼</td><td>ææ‡¼å¹³åº¸ã€ææ‡¼è¢«çœ‹ä¸èµ·</td><td>ç‚«è€€æˆå°±ã€éåº¦åŠªåŠ›</td></tr>
                        <tr><td>ä¿è­·ä»–äºº</td><td>ææ‡¼æˆç‚ºè² æ“”ã€æ„§ç–š</td><td>å ±å–œä¸å ±æ†‚ã€éš±å¿ç—›è‹¦</td></tr>
                        <tr><td>æƒ…ç·’éš”é›¢</td><td>ææ‡¼å´©æ½°ã€ç„¡æ³•è™•ç†è² é¢æƒ…ç·’</td><td>ç†æ€§åŒ–ã€ç”šè‡³æˆ´ä¸Šå¿«æ¨‚é¢å…·</td></tr>
                        <tr><td style="color:red;">å®‰å…¨é˜²ç¦¦</td><td style="color:red;">ææ‡¼å—å‚·ã€ææ‡¼å¤±æ§</td><td style="color:red;">å†·æ¼ ã€å¼·å‹¢ã€ä¸åœ¨ä¹</td></tr>
                    </tbody>
                </table>

                ${formatShortData('é¸å®šåŒ…è£å‹•æ©Ÿ', Array.isArray(escapedData.maskMotives) ? escapedData.maskMotives.join(', ') : escapedData.maskMotives || 'ç„¡')}
                ${formatLongData('åŒ…è£ç­†è¨˜', escapedData.maskNotes)}
                ${formatLongData('ç¶­æŒç¾ç‹€ä»£åƒ¹', escapedData.statusQuoCost)}
                
                <h2>2. å…§åœ¨æå•èˆ‡æ½›æ„è­˜ç‹€æ…‹</h2>
                ${formatLongData('æœ€åŠªåŠ›éš±è—çš„æƒ…ç·’', escapedData.hiddenEmotion)}
                ${formatLongData('å…§åœ¨å°å­©ç‹€æ…‹æè¿°', escapedData.innerChildState)}
            `;

            // --- IV. è‡¨åºŠè§€å¯Ÿèˆ‡åŠŸèƒ½æ€§è©•ä¼° ---
            htmlContent += `
                <h1>IV. è‡¨åºŠè§€å¯Ÿèˆ‡åŠŸèƒ½æ€§è©•ä¼°</h1>
                ${formatLongData('ä¸»è§€è§€å¯Ÿ (ç¥æƒ…ã€è¡¨é”ã€è¡£è‘—)', escapedData.subjectiveObservation)}

                <h2>2. åŠŸèƒ½æ€§è©•ä¼°</h2>
                ${formatShortData('ç¡çœ è³ªé‡èˆ‡æ™‚é•·', `${escapedData.sleepQuality || 'æœªé¸'} (${escapedData.sleepDurationActual || 'æœªå¡«'})`)}
                ${formatShortData('èƒ½é‡æ°´å¹³', escapedData.energyLevel)}
                ${formatShortData('é¢¨éšªæ¨™ç±¤', Array.isArray(escapedData.riskTags) ? escapedData.riskTags.join(', ') : escapedData.riskTags || 'ç„¡')}
                ${formatLongData('åŠŸèƒ½æ€§è¡Œç‚ºç­†è¨˜', escapedData.functionalNotes)}
                
                <h2>3. éèªè¨€èˆ‡é—œä¿‚ä¿¡è™Ÿ</h2>
                ${formatShortData('èªæ°£ä¸€è‡´æ€§', `${escapedData.toneConsistency || 'æœªé¸'} (${escapedData.toneNotes || 'ç„¡'})`)}
                ${formatShortData('è‚¢é«”è§€å¯Ÿæ¨™ç±¤', Array.isArray(escapedData.bodyCues) ? escapedData.bodyCues.join(', ') : escapedData.bodyCues || 'ç„¡')}
                ${formatLongData('è‚¢é«”ç­†è¨˜', escapedData.bodyNotes)}
            `;

            // --- V. æ²»ç™‚æ­·ç¨‹èˆ‡ç­–ç•¥ ---
            htmlContent += `
                <h1>V. æ²»ç™‚æ­·ç¨‹èˆ‡ç­–ç•¥è¦åŠƒ</h1>
                <h2>1. é—œä¿‚èˆ‡å‚¬çœ é å‚™åº¦</h2>
                ${formatShortData('ä¿¡ä»»ç­‰ç´š', escapedData.trustLevel)}
                ${formatShortData('å‚¬çœ åæ‡‰', `${escapedData.tranceResponsiveness || 'æœªé¸'} (${escapedData.tranceNotes || 'ç„¡'})`)}
                
                <h2>2. æ­·ç¨‹ç¸½çµèˆ‡è¨ˆç•«</h2>
                ${formatShortData('ç¸½æ¬¡æ•¸/é »ç‡', `${escapedData.totalSessions || 'æœªå¡«'} æ¬¡ / ${escapedData.sessionFrequency || 'æœªå¡«'}`)}
                ${formatLongData('å€‹æ¡ˆæœŸå¾…èˆ‡ä¸»è¦å›°æ“¾', escapedData.clientExpectations)}
                ${formatLongData('æ²»ç™‚å–å‘èˆ‡è¨ˆç•«', escapedData.approachPlan)}
                ${formatLongData('ç­–ç•¥èˆ‡è³‡æºå»ºæ§‹ç›®æ¨™', escapedData.strategyTarget)}
                ${formatLongData('ç™‚ç¨‹é€²å±•æ‘˜è¦', escapedData.progressSummary)}
            `;

            // --- VI. æ­·ç¨‹è§€å¯Ÿèˆ‡ç£å°å•é¡Œ ---
            htmlContent += `
                <h1>VI. æ­·ç¨‹è§€å¯Ÿèˆ‡ç£å°å•é¡Œ</h1>
                ${formatLongData('ç‰¹æ®Šäº‹ä»¶èˆ‡è½‰æŠ˜é»', escapedData.specialIncidents)}
                ${formatLongData('ç£å°ä¸­è¨è«–å•é¡Œ', escapedData.supervisionQuestions)}
                ${formatLongData('å¯æ·±å…¥æ¢è¨çš„é»', escapedData.deepDivePoints)}
            `;


            htmlContent += `</body></html>`;
            return htmlContent;
        }


        document.getElementById('assessment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const form = e.target;
            const formData = new FormData(form);
            const data = {};

            // Collect all form data (Handling multiple checkbox values correctly)
            for (const [key, value] of formData.entries()) {
                if (key.endsWith('[]')) { 
                    const cleanKey = key.slice(0, -2);
                    if (!data[cleanKey]) {
                        data[cleanKey] = [];
                    }
                    data[cleanKey].push(value);
                } else if (key in data && key !== 'maskMotives' && key !== 'riskTags' && key !== 'bodyCues') {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                }
                else {
                    data[key] = value;
                }
            }
            
            // Checkbox arrays consolidation for keys not ending in []
            data.maskMotives = formData.getAll('maskMotives');
            data.riskTags = formData.getAll('riskTags');
            data.bodyCues = formData.getAll('bodyCues');

            const content = generateWordContent(data);
            const filename = \`å€‹æ¡ˆç£å°å ±å‘Š_\${data.clientId || 'æœªå‘½åå€‹æ¡ˆ'}_\${data.sessionDate || new Date().toISOString().substring(0, 10)}.doc\`;

            // Create a Blob with the content and set the MIME type for MS Word compatibility
            const blob = new Blob([content], {
                type: 'application/msword;charset=utf-8'
            });

            // Trigger the download
            if (window.navigator.msSaveOrOpenBlob) { // For IE and Edge
                window.navigator.msSaveOrOpenBlob(blob, filename);
            } else {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            console.log("Word file download initiated for:", data.clientId);
        });
        
        // åˆå§‹åŒ–ä¸€æ¬¡ï¼Œç¢ºä¿åˆå§‹ç‹€æ…‹æ­£ç¢º
        window.onload = function() {
            document.getElementById('session-date').value = new Date().toISOString().substring(0, 10);
            toggleRelationshipDetails(); // ç¢ºä¿åˆå§‹ç‹€æ…‹æ˜¯å–®èº«/æœªå©šï¼Œéš±è—ç´°ç¯€
        };
    </script>
</body>
</html>
